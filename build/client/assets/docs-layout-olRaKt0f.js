const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/search-default-Dv3UVr_a.js","assets/chunk-OIYGIGL5-BFuAKb0n.js","assets/index-BjhdOWXv.js","assets/index-Cx3IAmE2.js","assets/index-lnR2ABT4.js","assets/index-BNxrls_M.js","assets/Combination-Dzs_BIEW.js","assets/static-DQNE7FaE.js","assets/chunk-OTD7MV33-qJr9DjGl.js","assets/serialization-DUYLYDmB.js"])))=>i.map(i=>d[i]);
import{r as p,j as g,L as Lt,z as Mt,A as kt,B as Ft,C as Ut,w as zt,O as jt}from"./chunk-OIYGIGL5-BFuAKb0n.js";import{u as qe,_ as Ze,S as Bt,J as Wt,I as Vt,d as $t,a as ve,b as Gt,e as Ht}from"./index-BjhdOWXv.js";import{c as Kt,p as Xe,D as Jt,q as Qe,F as Yt,j as H,u as $,P as z,g as U,r as qt,d as Zt,i as Xt,e as Qt,f as fe,k as et,s as en,t as x,S as tn,n as nn,v as rn,H as on}from"./index-Cx3IAmE2.js";import{R as sn,h as an}from"./Combination-Dzs_BIEW.js";import{c as cn}from"./index-lnR2ABT4.js";const ln=Kt("SidebarContext");function un({children:t}){const e=p.useRef(!0),[n,r]=p.useState(!1),[o,s]=p.useState(!1),i=Xe();return qe(i,()=>{e.current&&r(!1),e.current=!0}),g.jsx(ln.Provider,{value:p.useMemo(()=>({open:n,setOpen:r,collapsed:o,setCollapsed:s,closeOnRedirect:e}),[n,o]),children:t})}const fn=p.lazy(()=>Ze(()=>import("./search-default-Dv3UVr_a.js"),__vite__mapDeps([0,1,2,3,4,5,6])));function dn({children:t,dir:e="ltr",theme:n={},search:r,i18n:o}){let s=t;return r?.enabled!==!1&&(s=g.jsx(Bt,{SearchDialog:fn,...r,children:s})),n?.enabled!==!1&&(s=g.jsx(Wt,{attribute:"class",defaultTheme:"system",enableSystem:!0,disableTransitionOnChange:!0,...n,children:s})),o&&(s=g.jsx(hn,{...o,children:s})),g.jsx(Jt,{dir:e,children:g.jsx(un,{children:s})})}function hn({locales:t=[],locale:e,onLocaleChange:n,children:r,translations:o}){const s=Qe(),i=Xe(),a=l=>{if(n)return n(l);const f=i.split("/").filter(u=>u.length>0);f[0]!==e?f.unshift(l):f[0]=l,s.push(`/${f.join("/")}`)},c=p.useRef(a);return c.current=a,g.jsx(Vt.Provider,{value:p.useMemo(()=>({locale:e,locales:t,text:{...$t,...o},onChange:l=>c.current(l)}),[e,t,o]),children:r})}var pn={usePathname(){return Ut().pathname},useParams(){return Ft()},useRouter(){const t=Mt(),e=kt();return p.useMemo(()=>({push(n){t(n)},refresh(){e.revalidate()}}),[t,e])},Link({href:t,prefetch:e,...n}){return g.jsx(Lt,{to:t,prefetch:e?"intent":"none",...n,children:n.children})}};function gn({children:t}){return g.jsx(Yt,{...pn,children:t})}function mn(t){return g.jsx(gn,{children:g.jsx(dn,{...t,children:t.children})})}function yn(t,e=globalThis?.document){const n=H(t);p.useEffect(()=>{const r=o=>{o.key==="Escape"&&n(o)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var bn="DismissableLayer",be="dismissableLayer.update",Sn="dismissableLayer.pointerDownOutside",vn="dismissableLayer.focusOutside",Te,tt=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),nt=p.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:s,onInteractOutside:i,onDismiss:a,...c}=t,l=p.useContext(tt),[f,u]=p.useState(null),d=f?.ownerDocument??globalThis?.document,[,h]=p.useState({}),m=$(e,O=>u(O)),y=Array.from(l.layers),[S]=[...l.layersWithOutsidePointerEventsDisabled].slice(-1),v=y.indexOf(S),I=f?y.indexOf(f):-1,b=l.layersWithOutsidePointerEventsDisabled.size>0,E=I>=v,N=On(O=>{const T=O.target,A=[...l.branches].some(M=>M.contains(T));!E||A||(o?.(O),i?.(O),O.defaultPrevented||a?.())},d),w=Dn(O=>{const T=O.target;[...l.branches].some(M=>M.contains(T))||(s?.(O),i?.(O),O.defaultPrevented||a?.())},d);return yn(O=>{I===l.layers.size-1&&(r?.(O),!O.defaultPrevented&&a&&(O.preventDefault(),a()))},d),p.useEffect(()=>{if(f)return n&&(l.layersWithOutsidePointerEventsDisabled.size===0&&(Te=d.body.style.pointerEvents,d.body.style.pointerEvents="none"),l.layersWithOutsidePointerEventsDisabled.add(f)),l.layers.add(f),we(),()=>{n&&l.layersWithOutsidePointerEventsDisabled.size===1&&(d.body.style.pointerEvents=Te)}},[f,d,n,l]),p.useEffect(()=>()=>{f&&(l.layers.delete(f),l.layersWithOutsidePointerEventsDisabled.delete(f),we())},[f,l]),p.useEffect(()=>{const O=()=>h({});return document.addEventListener(be,O),()=>document.removeEventListener(be,O)},[]),g.jsx(z.div,{...c,ref:m,style:{pointerEvents:b?E?"auto":"none":void 0,...t.style},onFocusCapture:U(t.onFocusCapture,w.onFocusCapture),onBlurCapture:U(t.onBlurCapture,w.onBlurCapture),onPointerDownCapture:U(t.onPointerDownCapture,N.onPointerDownCapture)})});nt.displayName=bn;var In="DismissableLayerBranch",En=p.forwardRef((t,e)=>{const n=p.useContext(tt),r=p.useRef(null),o=$(e,r);return p.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),g.jsx(z.div,{...t,ref:o})});En.displayName=In;function On(t,e=globalThis?.document){const n=H(t),r=p.useRef(!1),o=p.useRef(()=>{});return p.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let c=function(){rt(Sn,n,l,{discrete:!0})};const l={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",o.current),o.current=c,e.addEventListener("click",o.current,{once:!0})):c()}else e.removeEventListener("click",o.current);r.current=!1},i=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(i),e.removeEventListener("pointerdown",s),e.removeEventListener("click",o.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function Dn(t,e=globalThis?.document){const n=H(t),r=p.useRef(!1);return p.useEffect(()=>{const o=s=>{s.target&&!r.current&&rt(vn,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",o),()=>e.removeEventListener("focusin",o)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function we(){const t=new CustomEvent(be);document.dispatchEvent(t)}function rt(t,e,n,{discrete:r}){const o=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&o.addEventListener(t,e,{once:!0}),r?qt(o,s):o.dispatchEvent(s)}var de="focusScope.autoFocusOnMount",he="focusScope.autoFocusOnUnmount",Ae={bubbles:!1,cancelable:!0},Nn="FocusScope",ot=p.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:o,onUnmountAutoFocus:s,...i}=t,[a,c]=p.useState(null),l=H(o),f=H(s),u=p.useRef(null),d=$(e,y=>c(y)),h=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(r){let y=function(b){if(h.paused||!a)return;const E=b.target;a.contains(E)?u.current=E:k(u.current,{select:!0})},S=function(b){if(h.paused||!a)return;const E=b.relatedTarget;E!==null&&(a.contains(E)||k(u.current,{select:!0}))},v=function(b){if(document.activeElement===document.body)for(const N of b)N.removedNodes.length>0&&k(a)};document.addEventListener("focusin",y),document.addEventListener("focusout",S);const I=new MutationObserver(v);return a&&I.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",S),I.disconnect()}}},[r,a,h.paused]),p.useEffect(()=>{if(a){Re.add(h);const y=document.activeElement;if(!a.contains(y)){const v=new CustomEvent(de,Ae);a.addEventListener(de,l),a.dispatchEvent(v),v.defaultPrevented||(Tn(xn(st(a)),{select:!0}),document.activeElement===y&&k(a))}return()=>{a.removeEventListener(de,l),setTimeout(()=>{const v=new CustomEvent(he,Ae);a.addEventListener(he,f),a.dispatchEvent(v),v.defaultPrevented||k(y??document.body,{select:!0}),a.removeEventListener(he,f),Re.remove(h)},0)}}},[a,l,f,h]);const m=p.useCallback(y=>{if(!n&&!r||h.paused)return;const S=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,v=document.activeElement;if(S&&v){const I=y.currentTarget,[b,E]=wn(I);b&&E?!y.shiftKey&&v===E?(y.preventDefault(),n&&k(b,{select:!0})):y.shiftKey&&v===b&&(y.preventDefault(),n&&k(E,{select:!0})):v===I&&y.preventDefault()}},[n,r,h.paused]);return g.jsx(z.div,{tabIndex:-1,...i,ref:d,onKeyDown:m})});ot.displayName=Nn;function Tn(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(k(r,{select:e}),document.activeElement!==n)return}function wn(t){const e=st(t),n=Pe(e,t),r=Pe(e.reverse(),t);return[n,r]}function st(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Pe(t,e){for(const n of t)if(!An(n,{upTo:e}))return n}function An(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function Pn(t){return t instanceof HTMLInputElement&&"select"in t}function k(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&Pn(t)&&e&&t.select()}}var Re=Rn();function Rn(){let t=[];return{add(e){const n=t[0];e!==n&&n?.pause(),t=xe(t,e),t.unshift(e)},remove(e){t=xe(t,e),t[0]?.resume()}}}function xe(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function xn(t){return t.filter(e=>e.tagName!=="A")}var pe=0;function _n(){p.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??_e()),document.body.insertAdjacentElement("beforeend",t[1]??_e()),pe++,()=>{pe===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),pe--}},[])}function _e(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}function Cn(t){const e=Ln(t),n=p.forwardRef((r,o)=>{const{children:s,...i}=r,a=p.Children.toArray(s),c=a.find(kn);if(c){const l=c.props.children,f=a.map(u=>u===c?p.Children.count(l)>1?p.Children.only(null):p.isValidElement(l)?l.props.children:null:u);return g.jsx(e,{...i,ref:o,children:p.isValidElement(l)?p.cloneElement(l,void 0,f):null})}return g.jsx(e,{...i,ref:o,children:s})});return n.displayName=`${t}.Slot`,n}function Ln(t){const e=p.forwardRef((n,r)=>{const{children:o,...s}=n;if(p.isValidElement(o)){const i=Un(o),a=Fn(s,o.props);return o.type!==p.Fragment&&(a.ref=r?Zt(r,i):i),p.cloneElement(o,a)}return p.Children.count(o)>1?p.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var Mn=Symbol("radix.slottable");function kn(t){return p.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Mn}function Fn(t,e){const n={...e};for(const r in e){const o=t[r],s=e[r];/^on[A-Z]/.test(r)?o&&s?n[r]=(...a)=>{const c=s(...a);return o(...a),c}:o&&(n[r]=o):r==="style"?n[r]={...o,...s}:r==="className"&&(n[r]=[o,s].filter(Boolean).join(" "))}return{...t,...n}}function Un(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var te="Dialog",[it]=Qt(te),[zn,L]=it(te),at=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:o,onOpenChange:s,modal:i=!0}=t,a=p.useRef(null),c=p.useRef(null),[l,f]=Xt({prop:r,defaultProp:o??!1,onChange:s,caller:te});return g.jsx(zn,{scope:e,triggerRef:a,contentRef:c,contentId:fe(),titleId:fe(),descriptionId:fe(),open:l,onOpenChange:f,onOpenToggle:p.useCallback(()=>f(u=>!u),[f]),modal:i,children:n})};at.displayName=te;var ct="DialogTrigger",jn=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,o=L(ct,n),s=$(e,o.triggerRef);return g.jsx(z.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":Ee(o.open),...r,ref:s,onClick:U(t.onClick,o.onOpenToggle)})});jn.displayName=ct;var Bn="DialogPortal",[cs,lt]=it(Bn,{forceMount:void 0}),Q="DialogOverlay",ut=p.forwardRef((t,e)=>{const n=lt(Q,t.__scopeDialog),{forceMount:r=n.forceMount,...o}=t,s=L(Q,t.__scopeDialog);return s.modal?g.jsx(et,{present:r||s.open,children:g.jsx(Vn,{...o,ref:e})}):null});ut.displayName=Q;var Wn=Cn("DialogOverlay.RemoveScroll"),Vn=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,o=L(Q,n);return g.jsx(sn,{as:Wn,allowPinchZoom:!0,shards:[o.contentRef],children:g.jsx(z.div,{"data-state":Ee(o.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),B="DialogContent",ft=p.forwardRef((t,e)=>{const n=lt(B,t.__scopeDialog),{forceMount:r=n.forceMount,...o}=t,s=L(B,t.__scopeDialog);return g.jsx(et,{present:r||s.open,children:s.modal?g.jsx($n,{...o,ref:e}):g.jsx(Gn,{...o,ref:e})})});ft.displayName=B;var $n=p.forwardRef((t,e)=>{const n=L(B,t.__scopeDialog),r=p.useRef(null),o=$(e,n.contentRef,r);return p.useEffect(()=>{const s=r.current;if(s)return an(s)},[]),g.jsx(dt,{...t,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:U(t.onCloseAutoFocus,s=>{s.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:U(t.onPointerDownOutside,s=>{const i=s.detail.originalEvent,a=i.button===0&&i.ctrlKey===!0;(i.button===2||a)&&s.preventDefault()}),onFocusOutside:U(t.onFocusOutside,s=>s.preventDefault())})}),Gn=p.forwardRef((t,e)=>{const n=L(B,t.__scopeDialog),r=p.useRef(!1),o=p.useRef(!1);return g.jsx(dt,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{t.onCloseAutoFocus?.(s),s.defaultPrevented||(r.current||n.triggerRef.current?.focus(),s.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:s=>{t.onInteractOutside?.(s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const i=s.target;n.triggerRef.current?.contains(i)&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&o.current&&s.preventDefault()}})}),dt=p.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:s,...i}=t,a=L(B,n),c=p.useRef(null),l=$(e,c);return _n(),g.jsxs(g.Fragment,{children:[g.jsx(ot,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:s,children:g.jsx(nt,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":Ee(a.open),...i,ref:l,onDismiss:()=>a.onOpenChange(!1)})}),g.jsxs(g.Fragment,{children:[g.jsx(Jn,{titleId:a.titleId}),g.jsx(qn,{contentRef:c,descriptionId:a.descriptionId})]})]})}),Ie="DialogTitle",ht=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,o=L(Ie,n);return g.jsx(z.h2,{id:o.titleId,...r,ref:e})});ht.displayName=Ie;var pt="DialogDescription",Hn=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,o=L(pt,n);return g.jsx(z.p,{id:o.descriptionId,...r,ref:e})});Hn.displayName=pt;var gt="DialogClose",Kn=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,o=L(gt,n);return g.jsx(z.button,{type:"button",...r,ref:e,onClick:U(t.onClick,()=>o.onOpenChange(!1))})});Kn.displayName=gt;function Ee(t){return t?"open":"closed"}var mt="DialogTitleWarning",[ls,yt]=en(mt,{contentName:B,titleName:Ie,docsSlug:"dialog"}),Jn=({titleId:t})=>{const e=yt(mt),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return p.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},Yn="DialogDescriptionWarning",qn=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${yt(Yn).contentName}}.`;return p.useEffect(()=>{const o=t.current?.getAttribute("aria-describedby");e&&o&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null};const bt=p.createContext(null),St=p.createContext(null),vt=p.createContext(null);function Zn({open:t,onOpenChange:e,search:n,onSearchChange:r,isLoading:o=!1,children:s}){const[i,a]=p.useState(null);return g.jsx(at,{open:t,onOpenChange:e,children:g.jsx(bt.Provider,{value:p.useMemo(()=>({open:t,onOpenChange:e,search:n,onSearchChange:r,active:i,setActive:a,isLoading:o}),[i,o,e,r,t,n]),children:s})})}function Xn(t){return g.jsx("div",{...t,className:x("flex flex-row items-center gap-2 p-3",t.className)})}function Qn(t){const{text:e}=ve(),{search:n,onSearchChange:r}=ne();return g.jsx("input",{...t,value:n,onChange:o=>r(o.target.value),placeholder:e.search,className:"w-0 flex-1 bg-transparent text-lg placeholder:text-fd-muted-foreground focus-visible:outline-none"})}function er({children:t="ESC",className:e,...n}){const{onOpenChange:r}=ne();return g.jsx("button",{type:"button",onClick:()=>r(!1),className:x(nn({color:"outline",size:"sm",className:"font-mono text-fd-muted-foreground"}),e),...n,children:t})}function us(t){return g.jsx("div",{...t,className:x("bg-fd-secondary/50 p-3 empty:hidden",t.className)})}function tr(t){return g.jsx(ut,{...t,className:x("fixed inset-0 z-50 backdrop-blur-xs bg-fd-overlay data-[state=open]:animate-fd-fade-in data-[state=closed]:animate-fd-fade-out",t.className)})}function nr({children:t,...e}){const{text:n}=ve();return g.jsxs(ft,{"aria-describedby":void 0,...e,className:x("fixed left-1/2 top-4 md:top-[calc(50%-250px)] z-50 w-[calc(100%-1rem)] max-w-screen-sm -translate-x-1/2 rounded-xl border bg-fd-popover text-fd-popover-foreground shadow-2xl shadow-black/50 overflow-hidden data-[state=closed]:animate-fd-dialog-out data-[state=open]:animate-fd-dialog-in","*:border-b *:has-[+:last-child[data-empty=true]]:border-b-0 *:data-[empty=true]:border-b-0 *:last:border-b-0",e.className),children:[g.jsx(ht,{className:"hidden",children:n.search}),t]})}function rr({items:t=null,Empty:e=()=>g.jsx("div",{className:"py-12 text-center text-sm text-fd-muted-foreground",children:g.jsx(Gt,{label:"searchNoResult"})}),Item:n=o=>g.jsx(or,{...o}),...r}){const o=p.useRef(null),[s,i]=p.useState(()=>t&&t.length>0?t[0].id:null),{onOpenChange:a}=ne(),c=Qe(),l=u=>{u.type==="action"?u.onSelect():u.external?window.open(u.url,"_blank")?.focus():c.push(u.url),a(!1)},f=p.useEffectEvent(u=>{if(!(!t||u.isComposing)){if(u.key==="ArrowDown"||u.key=="ArrowUp"){let d=t.findIndex(h=>h.id===s);d===-1?d=0:u.key==="ArrowDown"?d++:d--,i(t.at(d%t.length)?.id??null),u.preventDefault()}if(u.key==="Enter"){const d=t.find(h=>h.id===s);d&&l(d),u.preventDefault()}}});return p.useEffect(()=>{const u=o.current;if(!u)return;const d=new ResizeObserver(()=>{const m=u.firstElementChild;u.style.setProperty("--fd-animated-height",`${m.clientHeight}px`)}),h=u.firstElementChild;return h&&d.observe(h),window.addEventListener("keydown",f),()=>{d.disconnect(),window.removeEventListener("keydown",f)}},[]),qe(t,()=>{t&&t.length>0&&i(t[0].id)}),g.jsx("div",{...r,ref:o,"data-empty":t===null,className:x("overflow-hidden h-(--fd-animated-height) transition-[height]",r.className),children:g.jsx("div",{className:x("w-full flex flex-col overflow-y-auto max-h-[460px] p-1",!t&&"hidden"),children:g.jsxs(St.Provider,{value:p.useMemo(()=>({active:s,setActive:i}),[s]),children:[t?.length===0&&e(),t?.map(u=>g.jsx(p.Fragment,{children:n({item:u,onClick:()=>l(u)})},u.id))]})})})}function or({item:t,className:e,children:n,renderHighlights:r=ar,...o}){const{active:s,setActive:i}=lr(),a=t.id===s;return t.type==="action"?n??(n=t.node):n??(n=g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"inline-flex items-center text-fd-muted-foreground text-xs empty:hidden",children:t.breadcrumbs?.map((c,l)=>g.jsxs(p.Fragment,{children:[l>0&&g.jsx(rn,{className:"size-4"}),c]},l))}),t.type!=="page"&&g.jsx("div",{role:"none",className:"absolute start-3 inset-y-0 w-px bg-fd-border"}),g.jsxs("p",{className:x("min-w-0 truncate",t.type!=="page"&&"ps-4",t.type==="page"||t.type==="heading"?"font-medium":"text-fd-popover-foreground/80"),children:[t.type==="heading"&&g.jsx(on,{className:"inline me-1 size-4 text-fd-muted-foreground"}),t.contentWithHighlights?r(t.contentWithHighlights):t.content]})]})),g.jsx("button",{type:"button",ref:p.useCallback(c=>{a&&c&&Ht(c,{scrollMode:"if-needed",block:"nearest",boundary:c.parentElement})},[a]),"aria-selected":a,className:x("relative select-none px-2.5 py-2 text-start text-sm rounded-lg",a&&"bg-fd-accent text-fd-accent-foreground",e),onPointerMove:()=>i(t.id),...o,children:n})}function sr(t){const{isLoading:e}=ne();return g.jsx(tn,{...t,className:x("size-5 text-fd-muted-foreground",e&&"animate-pulse duration-400",t.className)})}const ir=cn("rounded-md border px-2 py-0.5 text-xs font-medium text-fd-muted-foreground transition-colors",{variants:{active:{true:"bg-fd-accent text-fd-accent-foreground"}}});function fs({tag:t,onTagChange:e,allowClear:n=!1,...r}){return g.jsx("div",{...r,className:x("flex items-center gap-1 flex-wrap",r.className),children:g.jsx(vt.Provider,{value:p.useMemo(()=>({value:t,onValueChange:e,allowClear:n}),[n,e,t]),children:r.children})})}function ds({value:t,className:e,...n}){const{onValueChange:r,value:o,allowClear:s}=cr(),i=t===o;return g.jsx("button",{type:"button","data-active":i,className:x(ir({active:i,className:e})),onClick:()=>{r(i&&s?void 0:t)},tabIndex:-1,...n,children:n.children})}function ar(t){return t.map((e,n)=>e.styles?.highlight?g.jsx("span",{className:"text-fd-primary underline",children:e.content},n):g.jsx(p.Fragment,{children:e.content},n))}function ne(){const t=p.useContext(bt);if(!t)throw new Error("Missing <SearchDialog />");return t}function cr(){const t=p.useContext(vt);if(!t)throw new Error("Missing <TagsList />");return t}function lr(){const t=p.useContext(St);if(!t)throw new Error("Missing <SearchDialogList />");return t}function Ce(t,e=!1){const n=t;for(const r in n){if(n[r]===void 0&&delete n[r],!e)continue;const o=n[r];if(typeof o=="object"&&o!==null){Ce(o,e);continue}if(Array.isArray(o))for(const s of o)Ce(s,e)}return t}function ur(t,e,n=It){const[r,o]=p.useState(t);n(r,t)&&(e(t,r),o(t))}function It(t,e){return Array.isArray(t)&&Array.isArray(e)?e.length!==t.length||t.some((n,r)=>It(n,e[r])):t!==e}function fr(t,e=1e3){const[n,r]=p.useState(t);return p.useEffect(()=>{if(e===0)return;const o=window.setTimeout(()=>{r(t)},e);return()=>clearTimeout(o)},[e,t]),e===0?t:n}function Se(t,e){if(t===e)return!0;if(Array.isArray(t)&&Array.isArray(e))return e.length===t.length&&t.every((n,r)=>Se(n,e[r]));if(typeof t=="object"&&t&&typeof e=="object"&&e){const n=Object.keys(t),r=Object.keys(e);return n.length===r.length&&n.every(o=>Object.hasOwn(e,o)&&Se(t[o],e[o]))}return!1}function dr(t,e){const{delayMs:n=100,allowEmpty:r=!1,...o}=t,[s,i]=p.useState(""),[a,c]=p.useState("empty"),[l,f]=p.useState(),[u,d]=p.useState(!1),h=fr(s,n),m=p.useRef(void 0);return ur([t,h],()=>{m.current&&(m.current(),m.current=void 0),d(!0);let y=!1;m.current=()=>{y=!0};async function S(){if(h.length===0&&!r)return"empty";switch(o.type){case"static":{const{search:v}=await Ze(async()=>{const{search:I}=await import("./static-DQNE7FaE.js");return{search:I}},__vite__mapDeps([7,8,9,1,2,3,4,5,6]));return v(h,o)}default:throw new Error("unknown search client")}}S().then(v=>{y||(f(void 0),c(v))}).catch(v=>{f(v)}).finally(()=>{d(!1)})},(y,S)=>!Se(y,S)),{search:s,setSearch:i,query:{isLoading:u,data:a,error:l}}}const Et={arabic:"ar",armenian:"am",bulgarian:"bg",czech:"cz",danish:"dk",dutch:"nl",english:"en",finnish:"fi",french:"fr",german:"de",greek:"gr",hungarian:"hu",indian:"in",indonesian:"id",irish:"ie",italian:"it",lithuanian:"lt",nepali:"np",norwegian:"no",portuguese:"pt",romanian:"ro",russian:"ru",serbian:"rs",slovenian:"ru",spanish:"es",swedish:"se",tamil:"ta",turkish:"tr",ukrainian:"uk",sanskrit:"sk"},hr={dutch:/[^A-Za-zàèéìòóù0-9_'-]+/gim,english:/[^A-Za-zàèéìòóù0-9_'-]+/gim,french:/[^a-z0-9äâàéèëêïîöôùüûœç-]+/gim,italian:/[^A-Za-zàèéìòóù0-9_'-]+/gim,norwegian:/[^a-z0-9_æøåÆØÅäÄöÖüÜ]+/gim,portuguese:/[^a-z0-9à-úÀ-Ú]/gim,russian:/[^a-z0-9а-яА-ЯёЁ]+/gim,spanish:/[^a-z0-9A-Zá-úÁ-ÚñÑüÜ]+/gim,swedish:/[^a-z0-9_åÅäÄöÖüÜ-]+/gim,german:/[^a-z0-9A-ZäöüÄÖÜß]+/gim,finnish:/[^a-z0-9äöÄÖ]+/gim,danish:/[^a-z0-9æøåÆØÅ]+/gim,hungarian:/[^a-z0-9áéíóöőúüűÁÉÍÓÖŐÚÜŰ]+/gim,romanian:/[^a-z0-9ăâîșțĂÂÎȘȚ]+/gim,serbian:/[^a-z0-9čćžšđČĆŽŠĐ]+/gim,turkish:/[^a-z0-9çÇğĞıİöÖşŞüÜ]+/gim,lithuanian:/[^a-z0-9ąčęėįšųūžĄČĘĖĮŠŲŪŽ]+/gim,arabic:/[^a-z0-9أ-ي]+/gim,nepali:/[^a-z0-9अ-ह]+/gim,irish:/[^a-z0-9áéíóúÁÉÍÓÚ]+/gim,indian:/[^a-z0-9अ-ह]+/gim,armenian:/[^a-z0-9ա-ֆ]+/gim,greek:/[^a-z0-9α-ωά-ώ]+/gim,indonesian:/[^a-z0-9]+/gim,ukrainian:/[^a-z0-9а-яА-ЯіїєІЇЄ]+/gim,slovenian:/[^a-z0-9čžšČŽŠ]+/gim,bulgarian:/[^a-z0-9а-яА-Я]+/gim,tamil:/[^a-z0-9அ-ஹ]+/gim,sanskrit:/[^a-z0-9A-Zāīūṛḷṃṁḥśṣṭḍṇṅñḻḹṝ]+/gim,czech:/[^A-Z0-9a-zěščřžýáíéúůóťďĚŠČŘŽÝÁÍÉÓÚŮŤĎ-]+/gim},Oe=Object.keys(Et);function pr(t){return t!==void 0&&Oe.includes(t)?Et[t]:void 0}const gr=Date.now().toString().slice(5);let mr=0;const Le=BigInt(1e3),Me=BigInt(1e6),ke=BigInt(1e9),ge=65535;function yr(t,e){if(e.length<ge)Array.prototype.push.apply(t,e);else{const n=e.length;for(let r=0;r<n;r+=ge)Array.prototype.push.apply(t,e.slice(r,r+ge))}}function br(t,...e){return t.replace(/%(?:(?<position>\d+)\$)?(?<width>-?\d*\.?\d*)(?<type>[dfs])/g,function(...n){const r=n[n.length-1],{width:o,type:s,position:i}=r,a=i?e[Number.parseInt(i)-1]:e.shift(),c=o===""?0:Number.parseInt(o);switch(s){case"d":return a.toString().padStart(c,"0");case"f":{let l=a;const[f,u]=o.split(".").map(d=>Number.parseFloat(d));return typeof u=="number"&&u>=0&&(l=l.toFixed(u)),typeof f=="number"&&f>=0?l.toString().padStart(c,"0"):l.toString()}case"s":return c<0?a.toString().padEnd(-c," "):a.toString().padStart(c," ");default:return a}})}function Sr(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope}function vr(){return typeof process<"u"&&process.release&&process.release.name==="node"}function Fe(){return BigInt(Math.floor(performance.now()*1e6))}function Ir(t){return typeof t=="number"&&(t=BigInt(t)),t<Le?`${t}ns`:t<Me?`${t/Le}μs`:t<ke?`${t/Me}ms`:`${t/ke}s`}function hs(){return Sr()?Fe():vr()||typeof process<"u"&&typeof process?.hrtime?.bigint=="function"?process.hrtime.bigint():typeof performance<"u"?Fe():BigInt(0)}function Ot(){return`${gr}-${mr++}`}function me(t,e){return Object.hasOwn===void 0?Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0:Object.hasOwn(t,e)?t[e]:void 0}function ps(t,e){return e[1]===t[1]?t[0]-e[0]:e[1]-t[1]}function gs(t){if(t.length===0)return[];if(t.length===1)return t[0];for(let n=1;n<t.length;n++)if(t[n].length<t[0].length){const r=t[0];t[0]=t[n],t[n]=r}const e=new Map;for(const n of t[0])e.set(n,1);for(let n=1;n<t.length;n++){let r=0;for(const o of t[n]){const s=e.get(o);s===n&&(e.set(o,s+1),r++)}if(r===0)return[]}return t[0].filter(n=>{const r=e.get(n);return r!==void 0&&e.set(n,0),r===t.length})}function Dt(t,e){const n={},r=e.length;for(let o=0;o<r;o++){const s=e[o],i=s.split(".");let a=t;const c=i.length;for(let l=0;l<c;l++)if(a=a[i[l]],typeof a=="object"){if(a!==null&&"lat"in a&&"lon"in a&&typeof a.lat=="number"&&typeof a.lon=="number"){a=n[s]=a;break}else if(!Array.isArray(a)&&a!==null&&l===c-1){a=void 0;break}}else if((a===null||typeof a!="object")&&l<c-1){a=void 0;break}typeof a<"u"&&(n[s]=a)}return n}function ms(t,e){return Dt(t,[e])[e]}const Er={cm:.01,m:1,km:1e3,ft:.3048,yd:.9144,mi:1609.344};function Nt(t,e){const n=Er[e];if(n===void 0)throw new Error(D("INVALID_DISTANCE_SUFFIX",t).message);return t*n}function ys(t,e){t.hits=t.hits.map(n=>({...n,document:{...n.document,...e.reduce((r,o)=>{const s=o.split("."),i=s.pop();let a=r;for(const c of s)a[c]=a[c]??{},a=a[c];return a[i]=null,r},n.document)}}))}function re(t){return Array.isArray(t)?t.some(e=>re(e)):t?.constructor?.name==="AsyncFunction"}const Ue="intersection"in new Set;function ze(...t){if(t.length===0)return new Set;if(t.length===1)return t[0];if(t.length===2){const r=t[0],o=t[1];if(Ue)return r.intersection(o);const s=new Set,i=r.size<o.size?r:o,a=i===r?o:r;for(const c of i)a.has(c)&&s.add(c);return s}const e={index:0,size:t[0].size};for(let r=1;r<t.length;r++)t[r].size<e.size&&(e.index=r,e.size=t[r].size);if(Ue){let r=t[e.index];for(let o=0;o<t.length;o++)o!==e.index&&(r=r.intersection(t[o]));return r}const n=t[e.index];for(let r=0;r<t.length;r++){if(r===e.index)continue;const o=t[r];for(const s of n)o.has(s)||n.delete(s)}return n}const Or="union"in new Set;function q(t,e){return Or?t?t.union(e):e:t?new Set([...t,...e]):new Set(e)}function Dr(t,e){const n=new Set;for(const r of t)e.has(r)||n.add(r);return n}const Nr=Oe.join(`
 - `),Tr={NO_LANGUAGE_WITH_CUSTOM_TOKENIZER:"Do not pass the language option to create when using a custom tokenizer.",LANGUAGE_NOT_SUPPORTED:`Language "%s" is not supported.
Supported languages are:
 - ${Nr}`,INVALID_STEMMER_FUNCTION_TYPE:"config.stemmer property must be a function.",MISSING_STEMMER:'As of version 1.0.0 @orama/orama does not ship non English stemmers by default. To solve this, please explicitly import and specify the "%s" stemmer from the package @orama/stemmers. See https://docs.orama.com/docs/orama-js/text-analysis/stemming for more information.',CUSTOM_STOP_WORDS_MUST_BE_FUNCTION_OR_ARRAY:"Custom stop words array must only contain strings.",UNSUPPORTED_COMPONENT:'Unsupported component "%s".',COMPONENT_MUST_BE_FUNCTION:'The component "%s" must be a function.',COMPONENT_MUST_BE_FUNCTION_OR_ARRAY_FUNCTIONS:'The component "%s" must be a function or an array of functions.',INVALID_SCHEMA_TYPE:'Unsupported schema type "%s" at "%s". Expected "string", "boolean" or "number" or array of them.',DOCUMENT_ID_MUST_BE_STRING:'Document id must be of type "string". Got "%s" instead.',DOCUMENT_ALREADY_EXISTS:'A document with id "%s" already exists.',DOCUMENT_DOES_NOT_EXIST:'A document with id "%s" does not exists.',MISSING_DOCUMENT_PROPERTY:'Missing searchable property "%s".',INVALID_DOCUMENT_PROPERTY:'Invalid document property "%s": expected "%s", got "%s"',UNKNOWN_INDEX:'Invalid property name "%s". Expected a wildcard string ("*") or array containing one of the following properties: %s',INVALID_BOOST_VALUE:"Boost value must be a number greater than, or less than 0.",INVALID_FILTER_OPERATION:"You can only use one operation per filter, you requested %d.",SCHEMA_VALIDATION_FAILURE:'Cannot insert document due schema validation failure on "%s" property.',INVALID_SORT_SCHEMA_TYPE:'Unsupported sort schema type "%s" at "%s". Expected "string" or "number".',CANNOT_SORT_BY_ARRAY:'Cannot configure sort for "%s" because it is an array (%s).',UNABLE_TO_SORT_ON_UNKNOWN_FIELD:'Unable to sort on unknown field "%s". Allowed fields: %s',SORT_DISABLED:"Sort is disabled. Please read the documentation at https://docs.orama.com/docs/orama-js for more information.",UNKNOWN_GROUP_BY_PROPERTY:'Unknown groupBy property "%s".',INVALID_GROUP_BY_PROPERTY:'Invalid groupBy property "%s". Allowed types: "%s", but given "%s".',UNKNOWN_FILTER_PROPERTY:'Unknown filter property "%s".',UNKNOWN_VECTOR_PROPERTY:'Unknown vector property "%s". Make sure the property exists in the schema and is configured as a vector.',INVALID_VECTOR_SIZE:'Vector size must be a number greater than 0. Got "%s" instead.',INVALID_VECTOR_VALUE:'Vector value must be a number greater than 0. Got "%s" instead.',INVALID_INPUT_VECTOR:`Property "%s" was declared as a %s-dimensional vector, but got a %s-dimensional vector instead.
Input vectors must be of the size declared in the schema, as calculating similarity between vectors of different sizes can lead to unexpected results.`,WRONG_SEARCH_PROPERTY_TYPE:'Property "%s" is not searchable. Only "string" properties are searchable.',FACET_NOT_SUPPORTED:`Facet doens't support the type "%s".`,INVALID_DISTANCE_SUFFIX:'Invalid distance suffix "%s". Valid suffixes are: cm, m, km, mi, yd, ft.',INVALID_SEARCH_MODE:'Invalid search mode "%s". Valid modes are: "fulltext", "vector", "hybrid".',MISSING_VECTOR_AND_SECURE_PROXY:"No vector was provided and no secure proxy was configured. Please provide a vector or configure an Orama Secure Proxy to perform hybrid search.",MISSING_TERM:'"term" is a required parameter when performing hybrid search. Please provide a search term.',INVALID_VECTOR_INPUT:'Invalid "vector" property. Expected an object with "value" and "property" properties, but got "%s" instead.',PLUGIN_CRASHED:"A plugin crashed during initialization. Please check the error message for more information:",PLUGIN_SECURE_PROXY_NOT_FOUND:`Could not find '@orama/secure-proxy-plugin' installed in your Orama instance.
Please install it before proceeding with creating an answer session.
Read more at https://docs.orama.com/docs/orama-js/plugins/plugin-secure-proxy#plugin-secure-proxy
`,PLUGIN_SECURE_PROXY_MISSING_CHAT_MODEL:`Could not find a chat model defined in the secure proxy plugin configuration.
Please provide a chat model before proceeding with creating an answer session.
Read more at https://docs.orama.com/docs/orama-js/plugins/plugin-secure-proxy#plugin-secure-proxy
`,ANSWER_SESSION_LAST_MESSAGE_IS_NOT_ASSISTANT:"The last message in the session is not an assistant message. Cannot regenerate non-assistant messages.",PLUGIN_COMPONENT_CONFLICT:'The component "%s" is already defined. The plugin "%s" is trying to redefine it.'};function D(t,...e){const n=new Error(br(Tr[t]??`Unsupported Orama Error code: ${t}`,...e));return n.code=t,"captureStackTrace"in Error.prototype&&Error.captureStackTrace(n),n}function wr(t){return{raw:Number(t),formatted:Ir(t)}}function Ar(t){if(t.id){if(typeof t.id!="string")throw D("DOCUMENT_ID_MUST_BE_STRING",typeof t.id);return t.id}return Ot()}function Tt(t,e){for(const[n,r]of Object.entries(e)){const o=t[n];if(!(typeof o>"u")&&!(r==="geopoint"&&typeof o=="object"&&typeof o.lon=="number"&&typeof o.lat=="number")&&!(r==="enum"&&(typeof o=="string"||typeof o=="number"))){if(r==="enum[]"&&Array.isArray(o)){const s=o.length;for(let i=0;i<s;i++)if(typeof o[i]!="string"&&typeof o[i]!="number")return n+"."+i;continue}if(J(r)){const s=At(r);if(!Array.isArray(o)||o.length!==s)throw D("INVALID_INPUT_VECTOR",n,s,o.length);continue}if(De(r)){if(!Array.isArray(o))return n;const s=wt(r),i=o.length;for(let a=0;a<i;a++)if(typeof o[a]!==s)return n+"."+a;continue}if(typeof r=="object"){if(!o||typeof o!="object")return n;const s=Tt(o,r);if(s)return n+"."+s;continue}if(typeof o!==r)return n}}}const Pr={string:!1,number:!1,boolean:!1,enum:!1,geopoint:!1,"string[]":!0,"number[]":!0,"boolean[]":!0,"enum[]":!0},Rr={"string[]":"string","number[]":"number","boolean[]":"boolean","enum[]":"enum"};function J(t){return typeof t=="string"&&/^vector\[\d+\]$/.test(t)}function De(t){return typeof t=="string"&&Pr[t]}function wt(t){return Rr[t]}function At(t){const e=Number(t.slice(7,-1));switch(!0){case isNaN(e):throw D("INVALID_VECTOR_VALUE",t);case e<=0:throw D("INVALID_VECTOR_SIZE",t);default:return e}}function xr(){return{idToInternalId:new Map,internalIdToId:[],save:_r,load:Cr}}function _r(t){return{internalIdToId:t.internalIdToId}}function Cr(t,e){const{internalIdToId:n}=e;t.internalDocumentIDStore.idToInternalId.clear(),t.internalDocumentIDStore.internalIdToId=[];const r=n.length;for(let o=0;o<r;o++){const s=n[o];t.internalDocumentIDStore.idToInternalId.set(s,o+1),t.internalDocumentIDStore.internalIdToId.push(s)}}function _(t,e){if(typeof e=="string"){const n=t.idToInternalId.get(e);if(n)return n;const r=t.idToInternalId.size+1;return t.idToInternalId.set(e,r),t.internalIdToId.push(e),r}return e>t.internalIdToId.length?_(t,e.toString()):e}function bs(t,e){if(t.internalIdToId.length<e)throw new Error(`Invalid internalId ${e}`);return t.internalIdToId[e-1]}function Lr(t,e){return{sharedInternalDocumentStore:e,docs:{},count:0}}function Mr(t,e){const n=_(t.sharedInternalDocumentStore,e);return t.docs[n]}function kr(t,e){const n=e.length,r=Array.from({length:n});for(let o=0;o<n;o++){const s=_(t.sharedInternalDocumentStore,e[o]);r[o]=t.docs[s]}return r}function Fr(t){return t.docs}function Ur(t,e,n,r){return typeof t.docs[n]<"u"?!1:(t.docs[n]=r,t.count++,!0)}function zr(t,e){const n=_(t.sharedInternalDocumentStore,e);return typeof t.docs[n]>"u"?!1:(delete t.docs[n],t.count--,!0)}function jr(t){return t.count}function Br(t,e){const n=e;return{docs:n.docs,count:n.count,sharedInternalDocumentStore:t}}function Wr(t){return{docs:t.docs,count:t.count}}function Vr(){return{create:Lr,get:Mr,getMultiple:kr,getAll:Fr,store:Ur,remove:zr,count:jr,load:Br,save:Wr}}const $r=["beforeInsert","afterInsert","beforeRemove","afterRemove","beforeUpdate","afterUpdate","beforeUpsert","afterUpsert","beforeSearch","afterSearch","beforeInsertMultiple","afterInsertMultiple","beforeRemoveMultiple","afterRemoveMultiple","beforeUpdateMultiple","afterUpdateMultiple","beforeUpsertMultiple","afterUpsertMultiple","beforeLoad","afterLoad","afterCreate"];function Gr(t,e){const n=[],r=t.plugins?.length;if(!r)return n;for(let o=0;o<r;o++)try{const s=t.plugins[o];typeof s[e]=="function"&&n.push(s[e])}catch(s){throw console.error("Caught error in getAllPluginsByHook:",s),D("PLUGIN_CRASHED")}return n}const Hr=["tokenizer","index","documentsStore","sorter","pinning"],je=["validateSchema","getDocumentIndexId","getDocumentProperties","formatElapsedTime"];function Ss(t,e,n,r,o){if(t.some(re))return(async()=>{for(const i of t)await i(e,n,r,o)})();for(const i of t)i(e,n,r,o)}function vs(t,e,n,r){if(t.some(re))return(async()=>{for(const s of t)await s(e,n,r)})();for(const s of t)s(e,n,r)}function Kr(t,e){if(t.some(re))return(async()=>{for(const r of t)await r(e)})();for(const r of t)r(e)}class P{k;v;l=null;r=null;h=1;constructor(e,n){this.k=e,this.v=new Set(n)}updateHeight(){this.h=Math.max(P.getHeight(this.l),P.getHeight(this.r))+1}static getHeight(e){return e?e.h:0}getBalanceFactor(){return P.getHeight(this.l)-P.getHeight(this.r)}rotateLeft(){const e=this.r;return this.r=e.l,e.l=this,this.updateHeight(),e.updateHeight(),e}rotateRight(){const e=this.l;return this.l=e.r,e.r=this,this.updateHeight(),e.updateHeight(),e}toJSON(){return{k:this.k,v:Array.from(this.v),l:this.l?this.l.toJSON():null,r:this.r?this.r.toJSON():null,h:this.h}}static fromJSON(e){const n=new P(e.k,e.v);return n.l=e.l?P.fromJSON(e.l):null,n.r=e.r?P.fromJSON(e.r):null,n.h=e.h,n}}class oe{root=null;insertCount=0;constructor(e,n){e!==void 0&&n!==void 0&&(this.root=new P(e,n))}insert(e,n,r=1e3){this.root=this.insertNode(this.root,e,n,r)}insertMultiple(e,n,r=1e3){for(const o of n)this.insert(e,o,r)}rebalance(){this.root&&(this.root=this.rebalanceNode(this.root))}toJSON(){return{root:this.root?this.root.toJSON():null,insertCount:this.insertCount}}static fromJSON(e){const n=new oe;return n.root=e.root?P.fromJSON(e.root):null,n.insertCount=e.insertCount||0,n}insertNode(e,n,r,o){if(e===null)return new P(n,[r]);const s=[];let i=e,a=null;for(;i!==null;)if(s.push({parent:a,node:i}),n<i.k)if(i.l===null){i.l=new P(n,[r]),s.push({parent:i,node:i.l});break}else a=i,i=i.l;else if(n>i.k)if(i.r===null){i.r=new P(n,[r]),s.push({parent:i,node:i.r});break}else a=i,i=i.r;else return i.v.add(r),e;let c=!1;this.insertCount++%o===0&&(c=!0);for(let l=s.length-1;l>=0;l--){const{parent:f,node:u}=s[l];if(u.updateHeight(),c){const d=this.rebalanceNode(u);f?f.l===u?f.l=d:f.r===u&&(f.r=d):e=d}}return e}rebalanceNode(e){const n=e.getBalanceFactor();if(n>1){if(e.l&&e.l.getBalanceFactor()>=0)return e.rotateRight();if(e.l)return e.l=e.l.rotateLeft(),e.rotateRight()}if(n<-1){if(e.r&&e.r.getBalanceFactor()<=0)return e.rotateLeft();if(e.r)return e.r=e.r.rotateRight(),e.rotateLeft()}return e}find(e){const n=this.findNodeByKey(e);return n?n.v:null}contains(e){return this.find(e)!==null}getSize(){let e=0;const n=[];let r=this.root;for(;r||n.length>0;){for(;r;)n.push(r),r=r.l;r=n.pop(),e++,r=r.r}return e}isBalanced(){if(!this.root)return!0;const e=[this.root];for(;e.length>0;){const n=e.pop(),r=n.getBalanceFactor();if(Math.abs(r)>1)return!1;n.l&&e.push(n.l),n.r&&e.push(n.r)}return!0}remove(e){this.root=this.removeNode(this.root,e)}removeDocument(e,n){const r=this.findNodeByKey(e);r&&(r.v.size===1?this.root=this.removeNode(this.root,e):r.v=new Set([...r.v.values()].filter(o=>o!==n)))}findNodeByKey(e){let n=this.root;for(;n;)if(e<n.k)n=n.l;else if(e>n.k)n=n.r;else return n;return null}removeNode(e,n){if(e===null)return null;const r=[];let o=e;for(;o!==null&&o.k!==n;)r.push(o),n<o.k?o=o.l:o=o.r;if(o===null)return e;if(o.l===null||o.r===null){const s=o.l?o.l:o.r;if(r.length===0)e=s;else{const i=r[r.length-1];i.l===o?i.l=s:i.r=s}}else{let s=o,i=o.r;for(;i.l!==null;)s=i,i=i.l;o.k=i.k,o.v=i.v,s.l===i?s.l=i.r:s.r=i.r,o=s}r.push(o);for(let s=r.length-1;s>=0;s--){const i=r[s];i.updateHeight();const a=this.rebalanceNode(i);if(s>0){const c=r[s-1];c.l===i?c.l=a:c.r===i&&(c.r=a)}else e=a}return e}rangeSearch(e,n){const r=new Set,o=[];let s=this.root;for(;s||o.length>0;){for(;s;)o.push(s),s=s.l;if(s=o.pop(),s.k>=e&&s.k<=n)for(const i of s.v)r.add(i);if(s.k>n)break;s=s.r}return r}greaterThan(e,n=!1){const r=new Set,o=[];let s=this.root;for(;s||o.length>0;){for(;s;)o.push(s),s=s.r;if(s=o.pop(),n&&s.k>=e||!n&&s.k>e)for(const i of s.v)r.add(i);else if(s.k<=e)break;s=s.l}return r}lessThan(e,n=!1){const r=new Set,o=[];let s=this.root;for(;s||o.length>0;){for(;s;)o.push(s),s=s.l;if(s=o.pop(),n&&s.k<=e||!n&&s.k<e)for(const i of s.v)r.add(i);else if(s.k>e)break;s=s.r}return r}}class se{numberToDocumentId;constructor(){this.numberToDocumentId=new Map}insert(e,n){this.numberToDocumentId.has(e)?this.numberToDocumentId.get(e).add(n):this.numberToDocumentId.set(e,new Set([n]))}find(e){const n=this.numberToDocumentId.get(e);return n?Array.from(n):null}remove(e){this.numberToDocumentId.delete(e)}removeDocument(e,n){const r=this.numberToDocumentId.get(n);r&&(r.delete(e),r.size===0&&this.numberToDocumentId.delete(n))}contains(e){return this.numberToDocumentId.has(e)}getSize(){let e=0;for(const n of this.numberToDocumentId.values())e+=n.size;return e}filter(e){const n=Object.keys(e);if(n.length!==1)throw new Error("Invalid operation");const r=n[0];switch(r){case"eq":{const o=e[r],s=this.numberToDocumentId.get(o);return s?Array.from(s):[]}case"in":{const o=e[r],s=new Set;for(const i of o){const a=this.numberToDocumentId.get(i);if(a)for(const c of a)s.add(c)}return Array.from(s)}case"nin":{const o=new Set(e[r]),s=new Set;for(const[i,a]of this.numberToDocumentId.entries())if(!o.has(i))for(const c of a)s.add(c);return Array.from(s)}default:throw new Error("Invalid operation")}}filterArr(e){const n=Object.keys(e);if(n.length!==1)throw new Error("Invalid operation");const r=n[0];switch(r){case"containsAll":{const s=e[r].map(a=>this.numberToDocumentId.get(a)??new Set);if(s.length===0)return[];const i=s.reduce((a,c)=>new Set([...a].filter(l=>c.has(l))));return Array.from(i)}case"containsAny":{const s=e[r].map(a=>this.numberToDocumentId.get(a)??new Set);if(s.length===0)return[];const i=s.reduce((a,c)=>new Set([...a,...c]));return Array.from(i)}default:throw new Error("Invalid operation")}}static fromJSON(e){if(!e.numberToDocumentId)throw new Error("Invalid Flat Tree JSON");const n=new se;for(const[r,o]of e.numberToDocumentId)n.numberToDocumentId.set(r,new Set(o));return n}toJSON(){return{numberToDocumentId:Array.from(this.numberToDocumentId.entries()).map(([e,n])=>[e,Array.from(n)])}}}function Jr(t,e,n){if(n<0)return-1;if(t===e)return 0;const r=t.length,o=e.length;if(r===0)return o<=n?o:-1;if(o===0)return r<=n?r:-1;const s=Math.abs(r-o);if(t.startsWith(e))return s<=n?s:-1;if(e.startsWith(t))return 0;if(s>n)return-1;const i=[];for(let a=0;a<=r;a++){i[a]=[a];for(let c=1;c<=o;c++)i[a][c]=a===0?c:0}for(let a=1;a<=r;a++){let c=1/0;for(let l=1;l<=o;l++)t[a-1]===e[l-1]?i[a][l]=i[a-1][l-1]:i[a][l]=Math.min(i[a-1][l]+1,i[a][l-1]+1,i[a-1][l-1]+1),c=Math.min(c,i[a][l]);if(c>n)return-1}return i[r][o]<=n?i[r][o]:-1}function Be(t,e,n){const r=Jr(t,e,n);return{distance:r,isBounded:r>=0}}class F{k;s;c=new Map;d=new Set;e;w="";constructor(e,n,r){this.k=e,this.s=n,this.e=r}updateParent(e){this.w=e.w+this.s}addDocument(e){this.d.add(e)}removeDocument(e){return this.d.delete(e)}findAllWords(e,n,r,o){const s=[this];for(;s.length>0;){const i=s.pop();if(i.e){const{w:a,d:c}=i;if(r&&a!==n)continue;if(me(e,a)!==null)if(o)if(Math.abs(n.length-a.length)<=o&&Be(n,a,o).isBounded)e[a]=[];else continue;else e[a]=[];if(me(e,a)!=null&&c.size>0){const l=e[a];for(const f of c)l.includes(f)||l.push(f)}}i.c.size>0&&s.push(...i.c.values())}return e}insert(e,n){let r=this,o=0;const s=e.length;for(;o<s;){const i=e[o],a=r.c.get(i);if(a){const c=a.s,l=c.length;let f=0;for(;f<l&&o+f<s&&c[f]===e[o+f];)f++;if(f===l){if(r=a,o+=f,o===s){a.e||(a.e=!0),a.addDocument(n);return}continue}const u=c.slice(0,f),d=c.slice(f),h=e.slice(o+f),m=new F(u[0],u,!1);if(r.c.set(u[0],m),m.updateParent(r),a.s=d,a.k=d[0],m.c.set(d[0],a),a.updateParent(m),h){const y=new F(h[0],h,!0);y.addDocument(n),m.c.set(h[0],y),y.updateParent(m)}else m.e=!0,m.addDocument(n);return}else{const c=new F(i,e.slice(o),!0);c.addDocument(n),r.c.set(i,c),c.updateParent(r);return}}r.e||(r.e=!0),r.addDocument(n)}_findLevenshtein(e,n,r,o,s){const i=[{node:this,index:n,tolerance:r}];for(;i.length>0;){const{node:a,index:c,tolerance:l}=i.pop();if(a.w.startsWith(e)){a.findAllWords(s,e,!1,0);continue}if(l<0)continue;if(a.e){const{w:u,d}=a;if(u&&(Be(e,u,o).isBounded&&(s[u]=[]),me(s,u)!==void 0&&d.size>0)){const h=new Set(s[u]);for(const m of d)h.add(m);s[u]=Array.from(h)}}if(c>=e.length)continue;const f=e[c];if(a.c.has(f)){const u=a.c.get(f);i.push({node:u,index:c+1,tolerance:l})}i.push({node:a,index:c+1,tolerance:l-1});for(const[u,d]of a.c)i.push({node:d,index:c,tolerance:l-1}),u!==f&&i.push({node:d,index:c+1,tolerance:l-1})}}find(e){const{term:n,exact:r,tolerance:o}=e;if(o&&!r){const s={};return this._findLevenshtein(n,0,o,o,s),s}else{let s=this,i=0;const a=n.length;for(;i<a;){const l=n[i],f=s.c.get(l);if(f){const u=f.s,d=u.length;let h=0;for(;h<d&&i+h<a&&u[h]===n[i+h];)h++;if(h===d)s=f,i+=h;else if(i+h===a)if(h===a-i){if(r)return{};{const m={};return f.findAllWords(m,n,r,o),m}}else return{};else return{}}else return{}}const c={};return s.findAllWords(c,n,r,o),c}}contains(e){let n=this,r=0;const o=e.length;for(;r<o;){const s=e[r],i=n.c.get(s);if(i){const a=i.s,c=a.length;let l=0;for(;l<c&&r+l<o&&a[l]===e[r+l];)l++;if(l<c)return!1;r+=c,n=i}else return!1}return!0}removeWord(e){if(!e)return!1;let n=this;const r=e.length,o=[];for(let s=0;s<r;s++){const i=e[s];if(n.c.has(i)){const a=n.c.get(i);o.push({parent:n,character:i}),s+=a.s.length-1,n=a}else return!1}for(n.d.clear(),n.e=!1;o.length>0&&n.c.size===0&&!n.e&&n.d.size===0;){const{parent:s,character:i}=o.pop();s.c.delete(i),n=s}return!0}removeDocumentByWord(e,n,r=!0){if(!e)return!0;let o=this;const s=e.length;for(let i=0;i<s;i++){const a=e[i];if(o.c.has(a)){const c=o.c.get(a);i+=c.s.length-1,o=c,r&&o.w!==e||o.removeDocument(n)}else return!1}return!0}static getCommonPrefix(e,n){const r=Math.min(e.length,n.length);let o=0;for(;o<r&&e.charCodeAt(o)===n.charCodeAt(o);)o++;return e.slice(0,o)}toJSON(){return{w:this.w,s:this.s,e:this.e,k:this.k,d:Array.from(this.d),c:Array.from(this.c?.entries())?.map(([e,n])=>[e,n.toJSON()])}}static fromJSON(e){const n=new F(e.k,e.s,e.e);return n.w=e.w,n.d=new Set(e.d),n.c=new Map(e?.c?.map(([r,o])=>[r,F.fromJSON(o)])||[]),n}}class ie extends F{constructor(){super("","",!1)}static fromJSON(e){const n=new ie;return n.w=e.w,n.s=e.s,n.e=e.e,n.k=e.k,n.d=new Set(e.d),n.c=new Map(e?.c?.map(([r,o])=>[r,F.fromJSON(o)])||[]),n}toJSON(){return super.toJSON()}}const Yr=2,qr=6371e3;class V{point;docIDs;left;right;parent;constructor(e,n){this.point=e,this.docIDs=new Set(n),this.left=null,this.right=null,this.parent=null}toJSON(){return{point:this.point,docIDs:Array.from(this.docIDs),left:this.left?this.left.toJSON():null,right:this.right?this.right.toJSON():null}}static fromJSON(e,n=null){const r=new V(e.point,e.docIDs);return r.parent=n,e.left&&(r.left=V.fromJSON(e.left,r)),e.right&&(r.right=V.fromJSON(e.right,r)),r}}class R{root;nodeMap;constructor(){this.root=null,this.nodeMap=new Map}getPointKey(e){return`${e.lon},${e.lat}`}insert(e,n){const r=this.getPointKey(e),o=this.nodeMap.get(r);if(o){n.forEach(c=>o.docIDs.add(c));return}const s=new V(e,n);if(this.nodeMap.set(r,s),this.root==null){this.root=s;return}let i=this.root,a=0;for(;;){if(a%Yr===0)if(e.lon<i.point.lon){if(i.left==null){i.left=s,s.parent=i;return}i=i.left}else{if(i.right==null){i.right=s,s.parent=i;return}i=i.right}else if(e.lat<i.point.lat){if(i.left==null){i.left=s,s.parent=i;return}i=i.left}else{if(i.right==null){i.right=s,s.parent=i;return}i=i.right}a++}}contains(e){const n=this.getPointKey(e);return this.nodeMap.has(n)}getDocIDsByCoordinates(e){const n=this.getPointKey(e),r=this.nodeMap.get(n);return r?Array.from(r.docIDs):null}removeDocByID(e,n){const r=this.getPointKey(e),o=this.nodeMap.get(r);o&&(o.docIDs.delete(n),o.docIDs.size===0&&(this.nodeMap.delete(r),this.deleteNode(o)))}deleteNode(e){const n=e.parent,r=e.left?e.left:e.right;r&&(r.parent=n),n?n.left===e?n.left=r:n.right===e&&(n.right=r):(this.root=r,this.root&&(this.root.parent=null))}searchByRadius(e,n,r=!0,o="asc",s=!1){const i=s?R.vincentyDistance:R.haversineDistance,a=[{node:this.root,depth:0}],c=[];for(;a.length>0;){const{node:l,depth:f}=a.pop();if(l==null)continue;const u=i(e,l.point);(r?u<=n:u>n)&&c.push({point:l.point,docIDs:Array.from(l.docIDs)}),l.left!=null&&a.push({node:l.left,depth:f+1}),l.right!=null&&a.push({node:l.right,depth:f+1})}return o&&c.sort((l,f)=>{const u=i(e,l.point),d=i(e,f.point);return o.toLowerCase()==="asc"?u-d:d-u}),c}searchByPolygon(e,n=!0,r=null,o=!1){const s=[{node:this.root,depth:0}],i=[];for(;s.length>0;){const{node:c,depth:l}=s.pop();if(c==null)continue;c.left!=null&&s.push({node:c.left,depth:l+1}),c.right!=null&&s.push({node:c.right,depth:l+1});const f=R.isPointInPolygon(e,c.point);(f&&n||!f&&!n)&&i.push({point:c.point,docIDs:Array.from(c.docIDs)})}const a=R.calculatePolygonCentroid(e);if(r){const c=o?R.vincentyDistance:R.haversineDistance;i.sort((l,f)=>{const u=c(a,l.point),d=c(a,f.point);return r.toLowerCase()==="asc"?u-d:d-u})}return i}toJSON(){return{root:this.root?this.root.toJSON():null}}static fromJSON(e){const n=new R;return e.root&&(n.root=V.fromJSON(e.root),n.buildNodeMap(n.root)),n}buildNodeMap(e){if(e==null)return;const n=this.getPointKey(e.point);this.nodeMap.set(n,e),e.left&&this.buildNodeMap(e.left),e.right&&this.buildNodeMap(e.right)}static calculatePolygonCentroid(e){let n=0,r=0,o=0;const s=e.length;for(let a=0,c=s-1;a<s;c=a++){const l=e[a].lon,f=e[a].lat,u=e[c].lon,d=e[c].lat,h=l*d-u*f;n+=h,r+=(l+u)*h,o+=(f+d)*h}n/=2;const i=6*n;return r/=i,o/=i,{lon:r,lat:o}}static isPointInPolygon(e,n){let r=!1;const o=n.lon,s=n.lat,i=e.length;for(let a=0,c=i-1;a<i;c=a++){const l=e[a].lon,f=e[a].lat,u=e[c].lon,d=e[c].lat;f>s!=d>s&&o<(u-l)*(s-f)/(d-f)+l&&(r=!r)}return r}static haversineDistance(e,n){const r=Math.PI/180,o=e.lat*r,s=n.lat*r,i=(n.lat-e.lat)*r,a=(n.lon-e.lon)*r,c=Math.sin(i/2)*Math.sin(i/2)+Math.cos(o)*Math.cos(s)*Math.sin(a/2)*Math.sin(a/2),l=2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c));return qr*l}static vincentyDistance(e,n){const o=.0033528106647474805,s=(1-o)*6378137,i=Math.PI/180,a=e.lat*i,c=n.lat*i,l=(n.lon-e.lon)*i,f=Math.atan((1-o)*Math.tan(a)),u=Math.atan((1-o)*Math.tan(c)),d=Math.sin(f),h=Math.cos(f),m=Math.sin(u),y=Math.cos(u);let S=l,v,I=1e3,b,E,N,w,O,T;do{const W=Math.sin(S),G=Math.cos(S);if(b=Math.sqrt(y*W*(y*W)+(h*m-d*y*G)*(h*m-d*y*G)),b===0)return 0;E=d*m+h*y*G,N=Math.atan2(b,E),w=h*y*W/b,O=1-w*w,T=E-2*d*m/O,isNaN(T)&&(T=0);const ue=o/16*O*(4+o*(4-3*O));v=S,S=l+(1-ue)*o*w*(N+ue*b*(T+ue*E*(-1+2*T*T)))}while(Math.abs(S-v)>1e-12&&--I>0);if(I===0)return NaN;const A=O*(6378137*6378137-s*s)/(s*s),M=1+A/16384*(4096+A*(-768+A*(320-175*A))),j=A/1024*(256+A*(-128+A*(74-47*A))),le=j*b*(T+j/4*(E*(-1+2*T*T)-j/6*T*(-3+4*b*b)*(-3+4*T*T)));return s*M*(N-le)}}class ae{true;false;constructor(){this.true=new Set,this.false=new Set}insert(e,n){n?this.true.add(e):this.false.add(e)}delete(e,n){n?this.true.delete(e):this.false.delete(e)}getSize(){return this.true.size+this.false.size}toJSON(){return{true:Array.from(this.true),false:Array.from(this.false)}}static fromJSON(e){const n=new ae;return n.true=new Set(e.true),n.false=new Set(e.false),n}}function Zr(t,e,n,r,o,{k:s,b:i,d:a}){return Math.log(1+(n-e+.5)/(e+.5))*(a+t*(s+1))/(t+s*(1-i+i*r/o))}const Is=.8;class ce{size;vectors=new Map;constructor(e){this.size=e}add(e,n){n instanceof Float32Array||(n=new Float32Array(n));const r=Pt(n,this.size);this.vectors.set(e,[r,n])}remove(e){this.vectors.delete(e)}find(e,n,r){return e instanceof Float32Array||(e=new Float32Array(e)),Xr(e,r,this.vectors,this.size,n)}toJSON(){const e=[];for(const[n,[r,o]]of this.vectors)e.push([n,[r,Array.from(o)]]);return{size:this.size,vectors:e}}static fromJSON(e){const n=e,r=new ce(n.size);for(const[o,[s,i]]of n.vectors)r.vectors.set(o,[s,new Float32Array(i)]);return r}}function Pt(t,e){let n=0;for(let r=0;r<e;r++)n+=t[r]*t[r];return Math.sqrt(n)}function Xr(t,e,n,r,o){const s=Pt(t,r),i=[],a=e||n.keys();for(const c of a){const l=n.get(c);if(!l)continue;const f=l[0],u=l[1];let d=0;for(let m=0;m<r;m++)d+=t[m]*u[m];const h=d/(s*f);h>=o&&i.push([c,h])}return i}function Qr(t,e,n,r,o){const s=_(t.sharedInternalDocumentStore,n);t.avgFieldLength[e]=((t.avgFieldLength[e]??0)*(o-1)+r.length)/o,t.fieldLengths[e][s]=r.length,t.frequencies[e][s]={}}function eo(t,e,n,r,o){let s=0;for(const c of r)c===o&&s++;const i=_(t.sharedInternalDocumentStore,n),a=s/r.length;t.frequencies[e][i][o]=a,o in t.tokenOccurrences[e]||(t.tokenOccurrences[e][o]=0),t.tokenOccurrences[e][o]=(t.tokenOccurrences[e][o]??0)+1}function to(t,e,n,r){const o=_(t.sharedInternalDocumentStore,n);r>1?t.avgFieldLength[e]=(t.avgFieldLength[e]*r-t.fieldLengths[e][o])/(r-1):t.avgFieldLength[e]=void 0,t.fieldLengths[e][o]=void 0,t.frequencies[e][o]=void 0}function no(t,e,n){t.tokenOccurrences[e][n]--}function Rt(t,e,n,r,o=""){r||(r={sharedInternalDocumentStore:e,indexes:{},vectorIndexes:{},searchableProperties:[],searchablePropertiesWithTypes:{},frequencies:{},tokenOccurrences:{},avgFieldLength:{},fieldLengths:{}});for(const[s,i]of Object.entries(n)){const a=`${o}${o?".":""}${s}`;if(typeof i=="object"&&!Array.isArray(i)){Rt(t,e,i,r,a);continue}if(J(i))r.searchableProperties.push(a),r.searchablePropertiesWithTypes[a]=i,r.vectorIndexes[a]={type:"Vector",node:new ce(At(i)),isArray:!1};else{const c=/\[/.test(i);switch(i){case"boolean":case"boolean[]":r.indexes[a]={type:"Bool",node:new ae,isArray:c};break;case"number":case"number[]":r.indexes[a]={type:"AVL",node:new oe(0,[]),isArray:c};break;case"string":case"string[]":r.indexes[a]={type:"Radix",node:new ie,isArray:c},r.avgFieldLength[a]=0,r.frequencies[a]={},r.tokenOccurrences[a]={},r.fieldLengths[a]={};break;case"enum":case"enum[]":r.indexes[a]={type:"Flat",node:new se,isArray:c};break;case"geopoint":r.indexes[a]={type:"BKD",node:new R,isArray:c};break;default:throw D("INVALID_SCHEMA_TYPE",Array.isArray(i)?"array":i,a)}r.searchableProperties.push(a),r.searchablePropertiesWithTypes[a]=i}}return r}function ro(t,e,n,r,o,s,i,a){return c=>{const{type:l,node:f}=e.indexes[n];switch(l){case"Bool":{f[c?"true":"false"].add(r);break}case"AVL":{const u=a?.avlRebalanceThreshold??1;f.insert(c,r,u);break}case"Radix":{const u=s.tokenize(c,o,n,!1);t.insertDocumentScoreParameters(e,n,r,u,i);for(const d of u)t.insertTokenScoreParameters(e,n,r,u,d),f.insert(d,r);break}case"Flat":{f.insert(c,r);break}case"BKD":{f.insert(c,[r]);break}}}}function oo(t,e,n,r,o,s,i,a,c,l,f){if(J(i))return so(e,n,s,r,o);const u=ro(t,e,n,o,a,c,l,f);if(!De(i))return u(s);const d=s,h=d.length;for(let m=0;m<h;m++)u(d[m])}function so(t,e,n,r,o){t.vectorIndexes[e].node.add(o,n)}function We(t,e,n,r,o,s,i,a,c,l){if(J(i))return e.vectorIndexes[n].node.remove(o),!0;const{type:f,node:u}=e.indexes[n];switch(f){case"AVL":return u.removeDocument(s,o),!0;case"Bool":return u[s?"true":"false"].delete(o),!0;case"Radix":{const d=c.tokenize(s,a,n);t.removeDocumentScoreParameters(e,n,r,l);for(const h of d)t.removeTokenScoreParameters(e,n,h),u.removeDocumentByWord(h,o);return!0}case"Flat":return u.removeDocument(o,s),!0;case"BKD":return u.removeDocByID(s,o),!1}}function io(t,e,n,r,o,s,i,a,c,l){if(!De(i))return We(t,e,n,r,o,s,i,a,c,l);const f=wt(i),u=s,d=u.length;for(let h=0;h<d;h++)We(t,e,n,r,o,u[h],f,a,c,l);return!0}function xt(t,e,n,r,o,s,i,a,c,l){const f=Array.from(r),u=t.avgFieldLength[e],d=t.fieldLengths[e],h=t.tokenOccurrences[e],m=t.frequencies[e],y=typeof h[n]=="number"?h[n]??0:0,S=f.length;for(let v=0;v<S;v++){const I=f[v];if(c&&!c.has(I))continue;l.has(I)||l.set(I,new Map);const b=l.get(I);b.set(e,(b.get(e)||0)+1);const E=m?.[I]?.[n]??0,N=Zr(E,y,o,d[I],u,s);i.has(I)?i.set(I,i.get(I)+N*a):i.set(I,N*a)}}function ao(t,e,n,r,o,s,i,a,c,l,f,u=0){const d=n.tokenize(e,r),h=d.length||1,m=new Map,y=new Map,S=new Map;for(const b of o){if(!(b in t.indexes))continue;const E=t.indexes[b],{type:N}=E;if(N!=="Radix")throw D("WRONG_SEARCH_PROPERTY_TYPE",b);const w=a[b]??1;if(w<=0)throw D("INVALID_BOOST_VALUE",w);d.length===0&&!e&&d.push("");const O=d.length;for(let T=0;T<O;T++){const A=d[T],M=E.node.find({term:A,exact:s,tolerance:i}),j=Object.keys(M);j.length>0&&y.set(A,!0);const le=j.length;for(let Y=0;Y<le;Y++){const W=j[Y],G=M[W];xt(t,b,W,G,l,c,S,w,f,m)}}}const v=Array.from(S.entries()).map(([b,E])=>[b,E]).sort((b,E)=>E[1]-b[1]);if(v.length===0)return[];if(u===1)return v;if(u===0){if(h===1)return v;for(const E of d)if(!y.get(E))return[];return v.filter(([E])=>{const N=m.get(E);return N?Array.from(N.values()).some(w=>w===h):!1})}const I=v.filter(([b])=>{const E=m.get(b);return E?Array.from(E.values()).some(N=>N===h):!1});if(I.length>0){const b=v.filter(([N])=>!I.some(([w])=>w===N)),E=Math.ceil(b.length*u);return[...I,...b.slice(0,E)]}return v}function X(t,e,n,r){if("and"in n&&n.and&&Array.isArray(n.and)){const i=n.and;if(i.length===0)return new Set;const a=i.map(c=>X(t,e,c,r));return ze(...a)}if("or"in n&&n.or&&Array.isArray(n.or)){const i=n.or;return i.length===0?new Set:i.map(c=>X(t,e,c,r)).reduce((c,l)=>q(c,l),new Set)}if("not"in n&&n.not){const i=n.not,a=new Set,c=t.sharedInternalDocumentStore;for(let f=1;f<=c.internalIdToId.length;f++)a.add(f);const l=X(t,e,i,r);return Dr(a,l)}const o=Object.keys(n),s=o.reduce((i,a)=>({[a]:new Set,...i}),{});for(const i of o){const a=n[i];if(typeof t.indexes[i]>"u")throw D("UNKNOWN_FILTER_PROPERTY",i);const{node:c,type:l,isArray:f}=t.indexes[i];if(l==="Bool"){const d=c,h=a?d.true:d.false;s[i]=q(s[i],h);continue}if(l==="BKD"){let d;if("radius"in a)d="radius";else if("polygon"in a)d="polygon";else throw new Error(`Invalid operation ${a}`);if(d==="radius"){const{value:h,coordinates:m,unit:y="m",inside:S=!0,highPrecision:v=!1}=a[d],I=Nt(h,y),b=c.searchByRadius(m,I,S,void 0,v);s[i]=Ve(s[i],b)}else{const{coordinates:h,inside:m=!0,highPrecision:y=!1}=a[d],S=c.searchByPolygon(h,m,void 0,y);s[i]=Ve(s[i],S)}continue}if(l==="Radix"&&(typeof a=="string"||Array.isArray(a))){for(const d of[a].flat()){const h=e.tokenize(d,r,i);for(const m of h){const y=c.find({term:m,exact:!0});s[i]=go(s[i],y)}}continue}const u=Object.keys(a);if(u.length>1)throw D("INVALID_FILTER_OPERATION",u.length);if(l==="Flat"){const d=new Set(f?c.filterArr(a):c.filter(a));s[i]=q(s[i],d);continue}if(l==="AVL"){const d=u[0],h=a[d];let m;switch(d){case"gt":{m=c.greaterThan(h,!1);break}case"gte":{m=c.greaterThan(h,!0);break}case"lt":{m=c.lessThan(h,!1);break}case"lte":{m=c.lessThan(h,!0);break}case"eq":{m=c.find(h)??new Set;break}case"between":{const[y,S]=h;m=c.rangeSearch(y,S);break}default:throw D("INVALID_FILTER_OPERATION",d)}s[i]=q(s[i],m)}}return ze(...Object.values(s))}function co(t){return t.searchableProperties}function lo(t){return t.searchablePropertiesWithTypes}function uo(t,e){const{indexes:n,vectorIndexes:r,searchableProperties:o,searchablePropertiesWithTypes:s,frequencies:i,tokenOccurrences:a,avgFieldLength:c,fieldLengths:l}=e,f={},u={};for(const d of Object.keys(n)){const{node:h,type:m,isArray:y}=n[d];switch(m){case"Radix":f[d]={type:"Radix",node:ie.fromJSON(h),isArray:y};break;case"Flat":f[d]={type:"Flat",node:se.fromJSON(h),isArray:y};break;case"AVL":f[d]={type:"AVL",node:oe.fromJSON(h),isArray:y};break;case"BKD":f[d]={type:"BKD",node:R.fromJSON(h),isArray:y};break;case"Bool":f[d]={type:"Bool",node:ae.fromJSON(h),isArray:y};break;default:f[d]=n[d]}}for(const d of Object.keys(r))u[d]={type:"Vector",isArray:!1,node:ce.fromJSON(r[d])};return{sharedInternalDocumentStore:t,indexes:f,vectorIndexes:u,searchableProperties:o,searchablePropertiesWithTypes:s,frequencies:i,tokenOccurrences:a,avgFieldLength:c,fieldLengths:l}}function fo(t){const{indexes:e,vectorIndexes:n,searchableProperties:r,searchablePropertiesWithTypes:o,frequencies:s,tokenOccurrences:i,avgFieldLength:a,fieldLengths:c}=t,l={};for(const u of Object.keys(n))l[u]=n[u].node.toJSON();const f={};for(const u of Object.keys(e)){const{type:d,node:h,isArray:m}=e[u];d==="Flat"||d==="Radix"||d==="AVL"||d==="BKD"||d==="Bool"?f[u]={type:d,node:h.toJSON(),isArray:m}:(f[u]=e[u],f[u].node=f[u].node.toJSON())}return{indexes:f,vectorIndexes:l,searchableProperties:r,searchablePropertiesWithTypes:o,frequencies:s,tokenOccurrences:i,avgFieldLength:a,fieldLengths:c}}function ho(){return{create:Rt,insert:oo,remove:io,insertDocumentScoreParameters:Qr,insertTokenScoreParameters:eo,removeDocumentScoreParameters:to,removeTokenScoreParameters:no,calculateResultScores:xt,search:ao,searchByWhereClause:X,getSearchableProperties:co,getSearchablePropertiesWithTypes:lo,load:uo,save:fo}}function Ve(t,e){t||(t=new Set);const n=e.length;for(let r=0;r<n;r++){const o=e[r].docIDs,s=o.length;for(let i=0;i<s;i++)t.add(o[i])}return t}function $e(t,e,n=!1){const r=n?R.vincentyDistance:R.haversineDistance,o=[],s=[];for(const{point:c}of t)s.push(r(e,c));const i=Math.max(...s);let a=0;for(const{docIDs:c}of t){const l=s[a],f=i-l+1;for(const u of c)o.push([u,f]);a++}return o.sort((c,l)=>l[1]-c[1]),o}function po(t,e){const n=Object.keys(t);if(n.length!==1)return{isGeoOnly:!1};const r=n[0],o=t[r];if(typeof e.indexes[r]>"u")return{isGeoOnly:!1};const{type:s}=e.indexes[r];return s==="BKD"&&o&&("radius"in o||"polygon"in o)?{isGeoOnly:!0,geoProperty:r,geoOperation:o}:{isGeoOnly:!1}}function Es(t,e){const n=t,r=po(e,n);if(!r.isGeoOnly||!r.geoProperty||!r.geoOperation)return null;const{node:o}=n.indexes[r.geoProperty],s=r.geoOperation,i=o;let a;if("radius"in s){const{value:c,coordinates:l,unit:f="m",inside:u=!0,highPrecision:d=!1}=s.radius,h=l,m=Nt(c,f);return a=i.searchByRadius(h,m,u,"asc",d),$e(a,h,d)}else if("polygon"in s){const{coordinates:c,inside:l=!0,highPrecision:f=!1}=s.polygon;a=i.searchByPolygon(c,l,"asc",f);const u=R.calculatePolygonCentroid(c);return $e(a,u,f)}return null}function go(t,e){t||(t=new Set);const n=Object.keys(e),r=n.length;for(let o=0;o<r;o++){const s=e[n[o]],i=s.length;for(let a=0;a<i;a++)t.add(s[a])}return t}function _t(t,e,n,r,o){const s={language:t.tokenizer.language,sharedInternalDocumentStore:e,enabled:!0,isSorted:!0,sortableProperties:[],sortablePropertiesWithTypes:{},sorts:{}};for(const[i,a]of Object.entries(n)){const c=`${o}${o?".":""}${i}`;if(!r.includes(c)){if(typeof a=="object"&&!Array.isArray(a)){const l=_t(t,e,a,r,c);yr(s.sortableProperties,l.sortableProperties),s.sorts={...s.sorts,...l.sorts},s.sortablePropertiesWithTypes={...s.sortablePropertiesWithTypes,...l.sortablePropertiesWithTypes};continue}if(!J(a))switch(a){case"boolean":case"number":case"string":s.sortableProperties.push(c),s.sortablePropertiesWithTypes[c]=a,s.sorts[c]={docs:new Map,orderedDocsToRemove:new Map,orderedDocs:[],type:a};break;case"geopoint":case"enum":continue;case"enum[]":case"boolean[]":case"number[]":case"string[]":continue;default:throw D("INVALID_SORT_SCHEMA_TYPE",Array.isArray(a)?"array":a,c)}}}return s}function mo(t,e,n,r){return r?.enabled!==!1?_t(t,e,n,(r||{}).unsortableProperties||[],""):{disabled:!0}}function yo(t,e,n,r){if(!t.enabled)return;t.isSorted=!1;const o=_(t.sharedInternalDocumentStore,n),s=t.sorts[e];s.orderedDocsToRemove.has(o)&&Ne(t,e),s.docs.set(o,s.orderedDocs.length),s.orderedDocs.push([o,r])}function Ct(t){if(t.isSorted||!t.enabled)return;const e=Object.keys(t.sorts);for(const n of e)Io(t,n);t.isSorted=!0}function bo(t,e,n){return e[1].localeCompare(n[1],pr(t))}function So(t,e){return t[1]-e[1]}function vo(t,e){return e[1]?-1:1}function Io(t,e){const n=t.sorts[e];let r;switch(n.type){case"string":r=bo.bind(null,t.language);break;case"number":r=So.bind(null);break;case"boolean":r=vo.bind(null);break}n.orderedDocs.sort(r);const o=n.orderedDocs.length;for(let s=0;s<o;s++){const i=n.orderedDocs[s][0];n.docs.set(i,s)}}function Eo(t){const e=Object.keys(t.sorts);for(const n of e)Ne(t,n)}function Ne(t,e){const n=t.sorts[e];n.orderedDocsToRemove.size&&(n.orderedDocs=n.orderedDocs.filter(r=>!n.orderedDocsToRemove.has(r[0])),n.orderedDocsToRemove.clear())}function Oo(t,e,n){if(!t.enabled)return;const r=t.sorts[e],o=_(t.sharedInternalDocumentStore,n);r.docs.get(o)&&(r.docs.delete(o),r.orderedDocsToRemove.set(o,!0))}function Do(t,e,n){if(!t.enabled)throw D("SORT_DISABLED");const r=n.property,o=n.order==="DESC",s=t.sorts[r];if(!s)throw D("UNABLE_TO_SORT_ON_UNKNOWN_FIELD",r,t.sortableProperties.join(", "));return Ne(t,r),Ct(t),e.sort((i,a)=>{const c=s.docs.get(_(t.sharedInternalDocumentStore,i[0])),l=s.docs.get(_(t.sharedInternalDocumentStore,a[0])),f=typeof c<"u",u=typeof l<"u";return!f&&!u?0:f?u?o?l-c:c-l:-1:1}),e}function No(t){return t.enabled?t.sortableProperties:[]}function To(t){return t.enabled?t.sortablePropertiesWithTypes:{}}function wo(t,e){const n=e;if(!n.enabled)return{enabled:!1};const r=Object.keys(n.sorts).reduce((o,s)=>{const{docs:i,orderedDocs:a,type:c}=n.sorts[s];return o[s]={docs:new Map(Object.entries(i).map(([l,f])=>[+l,f])),orderedDocsToRemove:new Map,orderedDocs:a,type:c},o},{});return{sharedInternalDocumentStore:t,language:n.language,sortableProperties:n.sortableProperties,sortablePropertiesWithTypes:n.sortablePropertiesWithTypes,sorts:r,enabled:!0,isSorted:n.isSorted}}function Ao(t){if(!t.enabled)return{enabled:!1};Eo(t),Ct(t);const e=Object.keys(t.sorts).reduce((n,r)=>{const{docs:o,orderedDocs:s,type:i}=t.sorts[r];return n[r]={docs:Object.fromEntries(o.entries()),orderedDocs:s,type:i},n},{});return{language:t.language,sortableProperties:t.sortableProperties,sortablePropertiesWithTypes:t.sortablePropertiesWithTypes,sorts:e,enabled:t.enabled,isSorted:t.isSorted}}function Po(){return{create:mo,insert:yo,remove:Oo,save:Ao,load:wo,sortBy:Do,getSortableProperties:No,getSortablePropertiesWithTypes:To}}const Ge=192,Ro=383,xo=[65,65,65,65,65,65,65,67,69,69,69,69,73,73,73,73,69,78,79,79,79,79,79,null,79,85,85,85,85,89,80,115,97,97,97,97,97,97,97,99,101,101,101,101,105,105,105,105,101,110,111,111,111,111,111,null,111,117,117,117,117,121,112,121,65,97,65,97,65,97,67,99,67,99,67,99,67,99,68,100,68,100,69,101,69,101,69,101,69,101,69,101,71,103,71,103,71,103,71,103,72,104,72,104,73,105,73,105,73,105,73,105,73,105,73,105,74,106,75,107,107,76,108,76,108,76,108,76,108,76,108,78,110,78,110,78,110,110,78,110,79,111,79,111,79,111,79,111,82,114,82,114,82,114,83,115,83,115,83,115,83,115,84,116,84,116,84,116,85,117,85,117,85,117,85,117,85,117,85,117,87,119,89,121,89,90,122,90,122,90,122,115];function _o(t){return t<Ge||t>Ro?t:xo[t-Ge]||t}function Co(t){const e=[];for(let n=0;n<t.length;n++)e[n]=_o(t.charCodeAt(n));return String.fromCharCode(...e)}const Lo={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},Mo={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""},ko="[^aeiou]",ee="[aeiouy]",C=ko+"[^aeiouy]*",K=ee+"[aeiou]*",ye="^("+C+")?"+K+C,Fo="^("+C+")?"+K+C+"("+K+")?$",Z="^("+C+")?"+K+C+K+C,He="^("+C+")?"+ee;function Uo(t){let e,n,r,o,s,i;if(t.length<3)return t;const a=t.substring(0,1);if(a=="y"&&(t=a.toUpperCase()+t.substring(1)),r=/^(.+?)(ss|i)es$/,o=/^(.+?)([^s])s$/,r.test(t)?t=t.replace(r,"$1$2"):o.test(t)&&(t=t.replace(o,"$1$2")),r=/^(.+?)eed$/,o=/^(.+?)(ed|ing)$/,r.test(t)){const c=r.exec(t);r=new RegExp(ye),r.test(c[1])&&(r=/.$/,t=t.replace(r,""))}else o.test(t)&&(e=o.exec(t)[1],o=new RegExp(He),o.test(e)&&(t=e,o=/(at|bl|iz)$/,s=new RegExp("([^aeiouylsz])\\1$"),i=new RegExp("^"+C+ee+"[^aeiouwxy]$"),o.test(t)?t=t+"e":s.test(t)?(r=/.$/,t=t.replace(r,"")):i.test(t)&&(t=t+"e")));if(r=/^(.+?)y$/,r.test(t)&&(e=r.exec(t)?.[1],r=new RegExp(He),e&&r.test(e)&&(t=e+"i")),r=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/,r.test(t)){const c=r.exec(t);e=c?.[1],n=c?.[2],r=new RegExp(ye),e&&r.test(e)&&(t=e+Lo[n])}if(r=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/,r.test(t)){const c=r.exec(t);e=c?.[1],n=c?.[2],r=new RegExp(ye),e&&r.test(e)&&(t=e+Mo[n])}if(r=/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/,o=/^(.+?)(s|t)(ion)$/,r.test(t))e=r.exec(t)?.[1],r=new RegExp(Z),e&&r.test(e)&&(t=e);else if(o.test(t)){const c=o.exec(t);e=c?.[1]??""+c?.[2]??"",o=new RegExp(Z),o.test(e)&&(t=e)}return r=/^(.+?)e$/,r.test(t)&&(e=r.exec(t)?.[1],r=new RegExp(Z),o=new RegExp(Fo),s=new RegExp("^"+C+ee+"[^aeiouwxy]$"),e&&(r.test(e)||o.test(e)&&!s.test(e))&&(t=e)),r=/ll$/,o=new RegExp(Z),r.test(t)&&o.test(t)&&(r=/.$/,t=t.replace(r,"")),a=="y"&&(t=a.toLowerCase()+t.substring(1)),t}function Ke(t,e,n=!0){const r=`${this.language}:${t}:${e}`;return n&&this.normalizationCache.has(r)?this.normalizationCache.get(r):this.stopWords?.includes(e)?(n&&this.normalizationCache.set(r,""),""):(this.stemmer&&!this.stemmerSkipProperties.has(t)&&(e=this.stemmer(e)),e=Co(e),n&&this.normalizationCache.set(r,e),e)}function zo(t){for(;t[t.length-1]==="";)t.pop();for(;t[0]==="";)t.shift();return t}function Je(t,e,n,r=!0){if(e&&e!==this.language)throw D("LANGUAGE_NOT_SUPPORTED",e);if(typeof t!="string")return[t];const o=this.normalizeToken.bind(this,n??"");let s;if(n&&this.tokenizeSkipProperties.has(n))s=[o(t,r)];else{const a=hr[this.language];s=t.toLowerCase().split(a).map(c=>o(c,r)).filter(Boolean)}const i=zo(s);return this.allowDuplicates?i:Array.from(new Set(i))}function Ye(t={}){if(!t.language)t.language="english";else if(!Oe.includes(t.language))throw D("LANGUAGE_NOT_SUPPORTED",t.language);let e;if(t.stemming||t.stemmer&&!("stemming"in t))if(t.stemmer){if(typeof t.stemmer!="function")throw D("INVALID_STEMMER_FUNCTION_TYPE");e=t.stemmer}else if(t.language==="english")e=Uo;else throw D("MISSING_STEMMER",t.language);let n;if(t.stopWords!==!1){if(n=[],Array.isArray(t.stopWords))n=t.stopWords;else if(typeof t.stopWords=="function")n=t.stopWords(n);else if(t.stopWords)throw D("CUSTOM_STOP_WORDS_MUST_BE_FUNCTION_OR_ARRAY");if(!Array.isArray(n))throw D("CUSTOM_STOP_WORDS_MUST_BE_FUNCTION_OR_ARRAY");for(const o of n)if(typeof o!="string")throw D("CUSTOM_STOP_WORDS_MUST_BE_FUNCTION_OR_ARRAY")}const r={tokenize:Je,language:t.language,stemmer:e,stemmerSkipProperties:new Set(t.stemmerSkipProperties?[t.stemmerSkipProperties].flat():[]),tokenizeSkipProperties:new Set(t.tokenizeSkipProperties?[t.tokenizeSkipProperties].flat():[]),stopWords:n,allowDuplicates:!!t.allowDuplicates,normalizeToken:Ke,normalizationCache:new Map};return r.tokenize=Je.bind(r),r.normalizeToken=Ke,r}function jo(t){return{sharedInternalDocumentStore:t,rules:new Map}}function Bo(t,e){if(t.rules.has(e.id))throw new Error(`PINNING_RULE_ALREADY_EXISTS: A pinning rule with id "${e.id}" already exists. Use updateRule to modify it.`);t.rules.set(e.id,e)}function Wo(t,e){if(!t.rules.has(e.id))throw new Error(`PINNING_RULE_NOT_FOUND: Cannot update pinning rule with id "${e.id}" because it does not exist. Use addRule to create it.`);t.rules.set(e.id,e)}function Vo(t,e){return t.rules.delete(e)}function $o(t,e){return t.rules.get(e)}function Go(t){return Array.from(t.rules.values())}function Ho(t,e){const n=t.toLowerCase().trim(),r=e.pattern.toLowerCase().trim();switch(e.anchoring){case"is":return n===r;case"starts_with":return n.startsWith(r);case"contains":return n.includes(r);default:return!1}}function Ko(t,e){return t?e.conditions.every(n=>Ho(t,n)):!1}function Jo(t,e){if(!e)return[];const n=[];for(const r of t.rules.values())Ko(e,r)&&n.push(r);return n}function Yo(t,e){const n=e;return{sharedInternalDocumentStore:t,rules:new Map(n?.rules??[])}}function qo(t){return{rules:Array.from(t.rules.entries())}}function Zo(){return{create:jo,addRule:Bo,updateRule:Wo,removeRule:Vo,getRule:$o,getAllRules:Go,getMatchingRules:Jo,load:Yo,save:qo}}function Xo(t){const e={formatElapsedTime:wr,getDocumentIndexId:Ar,getDocumentProperties:Dt,validateSchema:Tt};for(const n of je){const r=n;if(t[r]){if(typeof t[r]!="function")throw D("COMPONENT_MUST_BE_FUNCTION",r)}else t[r]=e[r]}for(const n of Object.keys(t))if(!Hr.includes(n)&&!je.includes(n))throw D("UNSUPPORTED_COMPONENT",n)}function Qo({schema:t,sort:e,language:n,components:r,id:o,plugins:s}){r||(r={});for(const I of s??[]){if(!("getComponents"in I)||typeof I.getComponents!="function")continue;const b=I.getComponents(t),E=Object.keys(b);for(const N of E)if(r[N])throw D("PLUGIN_COMPONENT_CONFLICT",N,I.name);r={...r,...b}}o||(o=Ot());let i=r.tokenizer,a=r.index,c=r.documentsStore,l=r.sorter,f=r.pinning;if(i?i.tokenize?i=i:i=Ye(i):i=Ye({language:n??"english"}),r.tokenizer&&n)throw D("NO_LANGUAGE_WITH_CUSTOM_TOKENIZER");const u=xr();a||=ho(),l||=Po(),c||=Vr(),f||=Zo(),Xo(r);const{getDocumentProperties:d,getDocumentIndexId:h,validateSchema:m,formatElapsedTime:y}=r,S={data:{},caches:{},schema:t,tokenizer:i,index:a,sorter:l,documentsStore:c,pinning:f,internalDocumentIDStore:u,getDocumentProperties:d,getDocumentIndexId:h,validateSchema:m,beforeInsert:[],afterInsert:[],beforeRemove:[],afterRemove:[],beforeUpdate:[],afterUpdate:[],beforeUpsert:[],afterUpsert:[],beforeSearch:[],afterSearch:[],beforeInsertMultiple:[],afterInsertMultiple:[],beforeRemoveMultiple:[],afterRemoveMultiple:[],beforeUpdateMultiple:[],afterUpdateMultiple:[],beforeUpsertMultiple:[],afterUpsertMultiple:[],afterCreate:[],formatElapsedTime:y,id:o,plugins:s,version:es()};S.data={index:S.index.create(S,u,t),docs:S.documentsStore.create(S,u),sorting:S.sorter.create(S,u,t,e),pinning:S.pinning.create(u)};for(const I of $r)S[I]=(S[I]??[]).concat(Gr(S,I));const v=S.afterCreate;return v&&Kr(v,S),S}function es(){return"{{VERSION}}"}function ts(){return Qo({schema:{_:"string"},language:"english"})}function ns(t){const{locale:e}=ve(),{search:n,setSearch:r,query:o}=dr({type:"static",initOrama:ts,locale:e,tag:"multi-page"});return g.jsxs(Zn,{search:n,onSearchChange:r,isLoading:o.isLoading,...t,children:[g.jsx(tr,{}),g.jsxs(nr,{children:[g.jsxs(Xn,{children:[g.jsx(sr,{}),g.jsx(Qn,{}),g.jsx(er,{})]}),g.jsx(rr,{items:o.data!=="empty"?o.data?.map(s=>({...s,breadcrumbs:s.breadcrumbs?.filter(i=>i!=="Multi-Page Documentation")})):null})]})]})}const Os=zt(function(){return g.jsx(mn,{search:{SearchDialog:ns},children:g.jsx(jt,{})})});export{Is as D,Zn as S,fs as T,tr as a,nr as b,Qo as c,Xn as d,sr as e,Qn as f,er as g,rr as h,us as i,ds as j,ms as k,D as l,bs as m,gs as n,Jo as o,_ as p,hs as q,Ce as r,yr as s,vs as t,Ss as u,ps as v,ys as w,Es as x,Ir as y,Os as z};
